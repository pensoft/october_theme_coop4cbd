[menu]
start = "id-1"
activeNode = 0
listItemClasses = "nav-item"
primaryClasses = "navbar-nav"
secondaryClasses = "dropdown-menu"
numberOfLevels = 2

[menu login]
start = "id-13"
activeNode = 0
listItemClasses = "item"
primaryClasses = "nav nav-pills"
secondaryClasses = "dropdown-menu"
numberOfLevels = 2

[jumbotron]
jumbotron = "intro"
background = "transperant"
templates = "template1"
description_limit = 0
==
<?php
use Pensoft\Articles\Models\Article;
function onStart(){
    $this['news'] = Article::news()->where('published_at', '<=', 'now()')->where('published', 'true')->orderBy('published_at', 'DESC')->take(10)->get();
}
?>
==
{% if user %}
{% set is_external = false %}
{% for group in user.groups %}
{% if group.code == 'external-users' %}
{% set is_external = true %}
{% endif %}
{% endfor %}

<nav class="navbar-loggedin-user" role="navigation" aria-label="User account navigation">
    <div class="navbar-collapse collapse row middle-xs">
        <div class="col-xs-12 col-md-9">{% if not is_external %} {% component 'login' %} {% endif %}</div>
        <div class="col-xs-2 end-xs col-md-3">
            {% if user.avatar %}
            <a href="/profile" class="profile_name" aria-describedby="profile-link-desc">
                <span>{{ user.name }} {{ user.surname }} &nbsp; &nbsp; </span>
                <img alt="Profile picture of {{ user.name }} {{ user.surname }}"
                     src="{{user.avatar.getThumb(30,30, { mode : 'crop' } )}}"
                     style="border-radius: 50%; margin-right:20px;"
                     align="right"
                     width="30"
                     height="30"
                     role="img">
            </a>
            <span id="profile-link-desc" class="sr-only">View and edit your profile settings</span>
            {% else %}
            <a href="/profile" class="profile_name" aria-describedby="profile-link-default-desc">
                <span>{{ user.name }} {{ user.surname }} &nbsp; &nbsp; </span>
                <img alt="Default profile icon for {{ user.name }} {{ user.surname }}"
                     src="{{ 'CMS_icons_avatar_white.svg'|media }}"
                     width="30"
                     height="30"
                     style="margin-right:20px;"
                     align="right"
                     role="img">
            </a>
            <span id="profile-link-default-desc" class="sr-only">View and edit your profile settings</span>
            {% endif %}
        </div>
    </div>
</nav>
{% endif %}

<nav class="navbar pr-1 pl-1" id="headernavbar" role="navigation" aria-label="Main navigation">
    <a href="{{'home'|page}}"
       class="navbar-brand"
       id="navbar-brand"
       style="background: url('{{ this.theme.site_logo.getPath() }}') no-repeat; background-position: center; background-size: contain;"
       aria-label="Home - {{ site_name }}"
       title="Go to homepage"></a>

    <div class="navbar-collapse collapse end-xs" id="headerNavbarNav" style="display: none;">
        {% component 'menu' %}

        <div class="social-media-links" role="navigation" aria-label="Social media links">
            {% if this.theme.bluesky_url %}
            <a href="{{this.theme.bluesky_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-bluesky normal" aria-label="Visit our Bluesky (opens in a new tab)"><span class="visually-hidden">Bluesky</span></a>
            {% endif %}
            {% if this.theme.facebook_url %}
            <a href="{{this.theme.facebook_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-facebook normal" aria-label="Visit our Facebook (opens in a new tab)"><span class="visually-hidden">Facebook</span></a>
            {% endif %}
            {% if this.theme.linkedin_url %}
            <a  href="{{linkedin_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-linkedin normal" aria-label="Visit our LinkedIn (opens in a new tab)"><span class="visually-hidden">LinkedIn</span></a>
            {% endif %}
            {% if this.theme.youtube_url %}
            <a  href="{{this.theme.youtube_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-youtube normal" aria-label="Visit our YouTube (opens in a new tab)"><span class="visually-hidden">YouTube</span></a>
            {% endif %}
            {% if this.theme.instagram_url %}
            <a  href="{{this.theme.instagram_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-instagram normal" aria-label="Visit our Instagram (opens in a new tab)"><span class="visually-hidden">Instagram</span></a>
            {% endif %}
            {% if this.theme.twitter_url %}
            <a href="{{this.theme.twitter_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-twitter normal" aria-label="Visit our X (Twitter) (opens in a new tab)"><span class="visually-hidden">X (Twitter)</span></a>
            {% endif %}
            {% if this.theme.threads_url %}
            <a href="{{this.theme.threads_url}}" target="_blank" rel="noopener noreferrer" class="pr p-secondary p-threads normal" aria-label="Visit our Threads (opens in a new tab)"><span class="visually-hidden">Threads</span></a>
            {% endif %}
        </div>

        <div id="headerNavbarLogin">
            <ul class="navbar-nav" style="padding: 0; margin: 0;" role="list">
            </ul>
        </div>
    </div>

    <div id="menuToggle" role="button"
         aria-label="Toggle mobile menu"
         aria-expanded="false"
         aria-controls="mobile-menu"
         tabindex="0">
        <input type="checkbox" aria-hidden="true" tabindex="-1" />
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <div id="mobile-menu" role="menu">
            {% component 'menu' %}
        </div>
    </div>
    <a class="pr p-search middle search-btn" onclick="showSearchForm();"
       aria-label="Open search form"
       aria-expanded="false"
       aria-controls="search"
       title="Search the website">
        <span class="sr-only">Search</span>
    </a>
    <div id="search" class="search" style="display: none;">
        <div class="close-search" onclick="hideSearchForm();"
             aria-label="Close search form"
             title="Close search">&#x2715;</div>
        <form class="input-group align-items-start" action="{{ url('search')}}" method="get" role="search">
            <label for="search-input" class="sr-only">Search query</label>
            <input id="search-input"
                   class="form-control search_input"
                   style="color: #000;"
                   name="q"
                   type="text"
                   autocomplete="on"
                   placeholder="Search"
                   aria-describedby="search-button">
            <button id="search-button"
                    class="btn btn-link pr p-search big text-grey-search-btn"
                    type="submit"
                    aria-label="Submit search">
                <span class="sr-only">Search</span>
            </button>
        </form>
    </div>
    <div id="google_translate_element" role="complementary"
         aria-label="Language translation"></div>

    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
        }
    </script>
</nav>

{% if this.theme.header_image and page_id == 'home' %}
<div class="container-fluid homepage-background">
    <div class="container">
        <header class="header-image {% if page_id != 'search' %} {{page_id}} {% endif %}">
            <div class="header-image-bar"
                 style="background: url('{{this.theme.header_image.getPath()}}') right center no-repeat;"
                 role="banner">
            </div>

            <div class="jumbotron" data-aos="fade-right" role="region" aria-label="hero content and intro">
                {% if page_id != 'home' and page_id != 'search' %}
                <h1 id="hero-content" class="underline white" {% if user %} style="margin-top:35px;"{% endif %}>
                    {%if page_title%} {{page_title}} {%else%} {{site_name}} {%endif%}
                </h1>
                {%endif%}

                {% if page_id == 'home' and tag_line%}
                <div class="container">
                    <div class="intro">
                        <div class="logo_main" role="img" aria-label="{{site_name}} logo"></div>
                        <p>{{tag_line|raw}}</p>
                        <div class="intro-text">
                            {% component 'jumbotron' %}
                        </div>
                        <div class="intro_btn">
                            <a href="{{'about'|page}}"
                               aria-describedby="about-link-desc">
                                More about the project <i aria-hidden="true"></i>
                            </a>
                            <span id="about-link-desc" class="sr-only">Learn more about our project goals and mission</span>
                        </div>
                    </div>
                </div>
                {% endif %}
        <div class="scrollDownIcon">
            <a onclick="$('html, body').animate({ scrollTop: $('.header-image-bar').height() }, 500);"
               aria-label="Scroll down to main content"
               title="Scroll to content">
                <span class="sr-only">Scroll down</span>
            </a>
        </div>

            </div>
        </header>

        <!-- latest from news -->
        <section class="container highlights-news" role="region" aria-labelledby="latest-news-heading">
            <header class="row">
                <div class="col-xs-12">
                    <h2 id="latest-news-heading" class="base_heading highlight_new_template_3">Latest News</h2>
                </div>
            </header>
            <div class="row newslist">
                <div class="col-xs-12">
                    {% if news.count > 3 %}
                    <div id="slick" role="region" aria-label="news carousel slider heading">
                        {% endif %}
                        {% for highlight in news %}
                        <div class="slide">
                            <article class="col-xs-12 col-md-4 news-item item-{{highlight.slug}}"
                                     role="article"
                                     aria-labelledby="news-title-{{loop.index}}">
                                <div class="row news_column">
                                    <a href="{{'news'|page}}/{{highlight.slug}}"
                                       aria-describedby="news-desc-{{loop.index}}">
                                        <div class="news_image">
                                            <img class="news-img-top"
                                                 src="{{ highlight.cover|crop_image|resize(376, 224, {'mode': 'crop'}) }}"
                                                 alt="Featured image for {{highlight.title}}"
                                                 role="img"
                                                 width="376"
                                                 height="224"
                                                 loading="lazy" />
                                        </div>
                                        <div class="news-container">
                                            <div class="news-title">
                                                <h3 id="news-title-{{loop.index}}" class="card-title">{{highlight.title}}</h3>
                                            </div>
                                            <div class="read_more" aria-hidden="true">Read more</div>
                                        </div>
                                    </a>
                                    <span id="news-desc-{{loop.index}}" class="sr-only">
                                        Read the full article: {{highlight.title}}
                                    </span>
                                </div>
                            </article>
                        </div>
                        {% endfor %}
                        {% if news.count > 3 %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </section>
    </div>
</div>
{% elseif page_id != 'training-corner' or not is_detail_page %}
<div class="container-fluid">
    <header class="header-image {% if page_id != 'search' %} {{page_id}} {% endif %}" role="banner">
        <div class="header-image-bar"
             style="background: url('{{'about-header.jpg'|media}}') center no-repeat;"
             role="img"
             aria-label="Header background image">
            <h1 class="underline white">
                {%if page_title%} {{page_title}} {%else%} {{site_name}} {%endif%}
            </h1>
        </div>
    </header>
</div>
{% endif %}


{% if user %}
<script>$(document).trigger('profile')</script>
<script>$(document).trigger('signout')</script>
{% else %}
<script>$(document).trigger('signin')</script>
{% endif %}
